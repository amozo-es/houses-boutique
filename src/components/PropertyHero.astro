---
// Property Hero Component
// Specialized hero for property detail pages with key information

import type { CollectionEntry } from 'astro:content';

interface Props {
  property: CollectionEntry<'properties'>;
}

const { property } = Astro.props;

const formatPrice = (price: number, currency: string = 'USD') => {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: currency,
    maximumFractionDigits: 0
  }).format(price);
};

const getStatusBadgeClass = (status: string) => {
  switch (status) {
    case 'sold':
      return 'bg-red-100 text-red-800';
    case 'pending':
      return 'bg-yellow-100 text-yellow-800';
    default:
      return 'bg-primary-faint text-primary-dark';
  }
};
---

<!-- Property Hero Component -->
<section class="relative h-96 md:h-[32rem] overflow-hidden">
  <!-- Hero Image -->
  <img
    src={property.data.image}
    alt={property.data.title}
    class="w-full h-full object-cover"
    loading="eager"
  />

  <!-- Gradient Overlay -->
  <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>

  <!-- Property Information Overlay -->
  <div class="absolute bottom-0 left-0 right-0 text-white">
    <div class="container mx-auto px-4 py-8">
      <!-- Status and Featured Badges -->
      <div class="flex items-center gap-3 mb-4">
        {property.data.featured && (
          <div class="bg-primary text-white px-3 py-1 rounded-full text-sm font-medium">
            Featured Property
          </div>
        )}
        <div class={`px-3 py-1 rounded-full text-sm font-medium ${getStatusBadgeClass(property.data.status)}`}>
          {property.data.status.charAt(0).toUpperCase() + property.data.status.slice(1)}
        </div>
      </div>

      <!-- Property Title and Price -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-end">
        <div>
          <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-2">
            {property.data.title}
          </h1>
          <div class="flex items-center text-white/90 mb-4">
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
            </svg>
            <span class="text-lg">{property.data.location.address}</span>
          </div>
        </div>

        <div class="text-right">
          <!-- Price Display -->
          <div class="flex items-baseline justify-end gap-3 mb-2">
            <span class="text-3xl md:text-4xl font-bold">
              {formatPrice(property.data.price, property.data.currency)}
            </span>
            {property.data.originalPrice && property.data.originalPrice > property.data.price && (
              <div class="text-right">
                <span class="text-lg line-through text-white/70">
                  {formatPrice(property.data.originalPrice, property.data.currency)}
                </span>
                <div class="text-sm text-primary-pale font-medium">
                  Save {formatPrice(property.data.originalPrice - property.data.price, property.data.currency)}
                </div>
              </div>
            )}
          </div>
        </div>
      </div>

      <!-- Key Property Details -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mt-8 pt-6 border-t border-white/20">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
            </svg>
          </div>
          <div>
            <div class="text-2xl font-semibold">{property.data.bedrooms}</div>
            <div class="text-sm text-white/70">Bedrooms</div>
          </div>
        </div>

        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
            </svg>
          </div>
          <div>
            <div class="text-2xl font-semibold">{property.data.bathrooms}</div>
            <div class="text-sm text-white/70">Bathrooms</div>
          </div>
        </div>

        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
            </svg>
          </div>
          <div>
            <div class="text-2xl font-semibold">{property.data.size} {property.data.sizeUnit}</div>
            <div class="text-sm text-white/70">Size</div>
          </div>
        </div>

        {property.data.parking && (
          <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"/>
                <path d="M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05A2.5 2.5 0 0115.95 16H17a1 1 0 001-1v-5a1 1 0 00-.293-.707l-2-2A1 1 0 0015 7h-1z"/>
              </svg>
            </div>
            <div>
              <div class="text-2xl font-semibold">{property.data.parking}</div>
              <div class="text-sm text-white/70">Parking</div>
            </div>
          </div>
        )}
      </div>
    </div>
  </div>
</section>