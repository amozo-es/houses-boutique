---
// Contact Agent Component
// Displays agent information and contact form

interface Props {
  agent?: {
    name: string;
    email: string;
    phone: string;
    image?: string;
    jobTitle?: string;
  };
  propertySlug?: string;
  compact?: boolean;
}

const { agent, propertySlug, compact = false } = Astro.props;
---

{agent && (
  <!-- Contact Agent Component -->
  <section class="bg-white rounded-lg elegant-shadow p-6">
    <h2 class="text-xl font-semibold text-primary-dark mb-4">
      Contact Agent
    </h2>

    <!-- Agent Info -->
    <div class="flex items-center space-x-3 mb-4">
      <img
        src={agent.image}
        alt={agent.name}
        class="w-12 h-12 rounded-full object-cover"
      />
      <div>
        <h3 class="font-semibold text-neutral-dark">{agent.name}</h3>
        <p class="text-sm text-neutral-light">{agent.jobTitle}</p>
      </div>
    </div>

    <!-- Quick Contact Info -->
    <div class="space-y-2 mb-6 text-sm">
      <div class="flex items-center text-neutral-light">
        <svg class="w-4 h-4 mr-2 text-primary-pale" fill="currentColor" viewBox="0 0 20 20">
          <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
          <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
        </svg>
        <a href={`mailto:${agent.email}`} class="hover:text-primary transition-colors">
          {agent.email}
        </a>
      </div>
      <div class="flex items-center text-neutral-light">
        <svg class="w-4 h-4 mr-2 text-primary-pale" fill="currentColor" viewBox="0 0 20 20">
          <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
        </svg>
        <a href={`tel:${agent.phone}`} class="hover:text-primary transition-colors">
          {agent.phone}
        </a>
      </div>
    </div>

    <!-- Contact Form -->
    <form class="space-y-4" method="POST" action="/api/contact">
      <input type="hidden" name="agent" value={agent.name} />
      {propertySlug && <input type="hidden" name="property" value={propertySlug} />}

    <div>
      <label for="name" class="block text-sm font-medium text-neutral-dark mb-1">
        Your Name
      </label>
      <input
        type="text"
        id="name"
        name="name"
        required
        class="w-full px-3 py-2 border border-neutral-300 rounded-sm focus:ring-2 focus:ring-primary focus:border-primary"
        placeholder="John Doe"
      />
    </div>

    <div>
      <label for="email" class="block text-sm font-medium text-neutral-dark mb-1">
        Email Address
      </label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full px-3 py-2 border border-neutral-300 rounded-sm focus:ring-2 focus:ring-primary focus:border-primary"
        placeholder="john@example.com"
      />
    </div>

    <div>
      <label for="phone" class="block text-sm font-medium text-neutral-dark mb-1">
        Phone Number
      </label>
      <input
        type="tel"
        id="phone"
        name="phone"
        class="w-full px-3 py-2 border border-neutral-300 rounded-sm focus:ring-2 focus:ring-primary focus:border-primary"
        placeholder="+1 (555) 987-6543"
      />
    </div>

    <div>
      <label for="message" class="block text-sm font-medium text-neutral-dark mb-1">
        Message
      </label>
      <textarea
        id="message"
        name="message"
        rows={compact ? 3 : 4}
        required
        class="w-full px-3 py-2 border border-neutral-300 rounded-sm focus:ring-2 focus:ring-primary focus:border-primary"
        placeholder="I'm interested in this property..."
      ></textarea>
    </div>

    <button
      type="submit"
      class="w-full bg-primary text-white py-2 rounded-sm hover:bg-primary-soft transition-colors font-medium"
    >
      Send Message
    </button>
  </form>

    <!-- Additional Info -->
    <div class="mt-6 pt-4 border-t border-primary-faint">
      <p class="text-xs text-neutral-light text-center">
        Available 7 days a week for showings and consultations
      </p>
    </div>
  </section>
)}